"""Сервисные классы и бизнес-логика для извлечения параметров договора.

В этом модуле определяются сервисы, отвечающие за анализ текста договора,
извлечение ключевых параметров и подготовку структурированной информации
для дальнейшей обработки в системе Документоскоп.
"""

import structlog

logger = structlog.get_logger()


class ContractExtractor:
    """Сервис для извлечения основных условий из текста договора."""

    def __init__(self):
        """Инициализация экземпляра ContractExtractor.

        Подготавливает сервис для дальнейшей обработки текста договора.
        """
        pass

    def extract_main_terms(self, text: str) -> dict:
        """Извлекает основные параметры из текста договора.

        Логгирует длину исходного текста и возвращает структуру с основными
        параметрами договора, такими как стороны, сроки, стоимость, штрафы,
        риски и условия расторжения. В текущей реализации возвращает тестовые
        значения (мок).

        Args:
            text (str): Текст договора, который необходимо проанализировать.

        Returns:
            dict: Структурированные параметры договора:
                - parties (str): Стороны договора.
                - duration (str): Срок действия.
                - price (str): Стоимость по договору.
                - penalty (str): Условия штрафов.
                - risks (str): Описание рисков.
                - termination (str): Условия расторжения.
        """
        logger.debug("extract_main_terms", text_len=len(text))  # логгирование
        # Мок: извлечение сторон, сроков, штрафов и условий
        return {
            "parties": "ООО Альфа — ООО Бета",
            "duration": "01.07.2025 – 30.06.2026",
            "price": "12 000 000 ₽",
            "penalty": "0,1 % в день",
            "risks": "одностороннее расторжение заказчиком без компенсации",
            "termination": "§ 8.2, 30-дн. уведомление",
        }
