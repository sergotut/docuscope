# Документоскоп — API

## /api/upload/ [POST]

**Описание:**  
Загрузка файла для анализа.

**Параметры:**  
- file: UploadFile (pdf/docx/jpg/png)

**Ответ:**  
```json
{
  "task_id": "uuid",
  "status": "processing"
}

## Splitter

### ContractSplitter

| Параметр   | Тип | Описание                                   |
| ---------- | --- | ------------------------------------------ |
| max_tokens | int | Максимальный размер чанка (токены cl100k)  |
| overlap    | int | Пересечение (overlap) между чанками        |
| split_sentences | bool | Сегментация по предложениям (`True` по умолчанию) |

#### Поля чанка

| Поле           | Тип | Описание                                          |
| -------------- | --- | ------------------------------------------------- |
| text           | str | Текст чанка                                       |
| page_no        | int | Номер страницы (если известен)                    |
| section_header | str | Заголовок раздела                                 |
| clause_number  | str | Номер пункта (напр. «8.2»)                        |
| chunk_idx      | int | Порядковый номер чанка                            |

> Dedup выполняется через MinHash (20-словные шинглы).  
> Порог Jaccard-сходства — **0.9**.

